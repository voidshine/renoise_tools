class'cString'function cString.split(a,b)TRACE("cString.split(str, pat)",a,b)local c={}local d="(.-)"..b;local e=1;local f,g,h=a:find(d,1)while f do if f~=1 or h~=""then table.insert(c,h)end;e=g+1;f,g,h=a:find(d,e)end;if e<=#a then h=a:sub(e)table.insert(c,h)end;return c end;function cString.trim(f)return f:gsub("^%s*(.-)%s*$","%1")end;function cString.capitalize(f)return string.gsub(" "..f,"%W%l",string.upper):sub(2)end;function cString.soft_wrap(a)local c=cString.split(a,"[-%s]")return table.concat(c,"\n")end;function cString.detect_counter_in_str(a)local i=string.match(a,"%((%d)%)$")if i then a=string.gsub(a,"%s*%(%d%)$","")else i=1 end;return i end;function cString.sanitize_string(a)a=a:gsub('"','')a=a:gsub("'",'')return a end;function cString.get_sortable_time(j)local c=os.date("*t",j)return("%d/%.2d/%.2d  %.2d:%.2d"):format(c.year,c.month,c.day,c.hour,c.min)end;function cString.format_beat(k)TRACE("cString.format_beat(val)",k)local l=cLib.fraction(k)*40/10;local m=cLib.fraction(l)*256;return("%d.%d.%d"):format(math.floor(k),math.floor(l),m)end;function cString.strip_line(a,n)TRACE("cString.strip_line(str,patt)",a,n)local o=table.create()local p=string.gmatch(a,"([^\n]*)\n")local q=0;for r in p do if not string.match(r,n)then o:insert(r)end;q=q+1 end;local s=q-#o;return table.concat(o,"\n"),s end;function cString.strip_leading_trailing_chars(a,t,u,v)if u then while string.sub(a,1,1)==t do a=string.sub(a,2,#a)end end;if v then while string.sub(a,#a,#a)==t do a=string.sub(a,1,#a-1)end end;return a end;function cString.table_to_string(c,w)TRACE("cString.table_to_string(t,args)",c,w)w=w or{}w.multiline=w.multiline or false;w.number_format=w.number_format or"%f"local a=""local x=w.multiline and"\n"or""if table.is_empty(c)then return"{}"else a=a.."{"for r,y in ipairs(c)do if type(y)=="string"then a=("%s'%s',"):format(a,y)elseif type(y)=="number"then a=("%s"..w.number_format..","):format(a,y)elseif type(y)=="table"then a=a.."{"for z,A in pairs(y)do if type(A)=="string"then local k=type(A)=="string"and("'%s'"):format(A)or A;a=("%s%s = %s,"):format(a,z,k)elseif type(A)=="number"then a=("%s%s = "..w.number_format..","):format(a,z,A)elseif type(A)=="boolean"then a=("%s%s = %s,"):format(a,z,A and"true"or"false")end end;a=a.."},"..x end end;a=a.."}"..x end;return a end