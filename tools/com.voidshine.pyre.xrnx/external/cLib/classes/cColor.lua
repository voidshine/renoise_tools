class'cColor'function cColor.adjust_brightness(a,b)TRACE("cColor.adjust_brightness(rgb,amt)",a,b)a=table.rcopy(a)local c=cColor.rgb_to_hsv(a)if b>0.5 then local d=(b-0.5)*2;c[3]=c[3]+(1-c[3])*d else local d=1-b*2;c[3]=c[3]*d end;return cColor.hsv_to_rgb(c)end;function cColor.get_average(e)return(e[1]+e[2]+e[3])/3 end;function cColor.color_table_to_value(f)return f[1]*0x10000+f[2]*0x100+f[3]end;function cColor.color_table_to_hex_string(f,g)local h=cColor.color_table_to_value(f)return cColor.value_to_hex_string(h,g)end;function cColor.value_to_color_table(h)local i=math.floor(h/0x10000)local j=math.floor(h/0x100)-i*0x100;local k=h-(i*0x10000+j*0x100)return{i,j,k}end;function cColor.value_to_hex_string(h,g)if not g then g="0x"end;return("%s%.6X"):format(g,h)end;function cColor.hex_string_to_value(l)if string.sub(l,1,1)=="#"then l=string.sub(l,2,#l)end;if string.sub(l,1,2)=="0x"then l=string.sub(l,3,#l)end;local m=tonumber("0x"..l)if m and m<=0xFFFFFF then return m end end;function cColor.rgb_to_hsv(a)local i,j,k=a[1]/255,a[2]/255,a[3]/255;local n,o=math.max(i,j,k),math.min(i,j,k)local p,q,r;r=n;local s=n-o;if n==0 then q=0 else q=s/n end;if n==o then p=0 else if n==i then p=(j-k)/s;if j<k then p=p+6 end elseif n==j then p=(k-i)/s+2 elseif n==k then p=(i-j)/s+4 end;p=p/6 end;return{p,q,r}end;function cColor.hsv_to_rgb(c)local p,q,r=c[1],c[2],c[3]local i,j,k;local t=math.floor(p*6)local u=p*6-t;local v=r*(1-q)local w=r*(1-u*q)local f=r*(1-(1-u)*q)t=t%6;if t==0 then i,j,k=r,f,v elseif t==1 then i,j,k=w,r,v elseif t==2 then i,j,k=v,r,f elseif t==3 then i,j,k=v,w,r elseif t==4 then i,j,k=f,v,r elseif t==5 then i,j,k=r,v,w end;return{math.floor(i*255),math.floor(j*255),math.floor(k*255)}end