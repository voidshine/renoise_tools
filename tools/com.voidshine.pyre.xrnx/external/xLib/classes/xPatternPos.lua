class'xPatternPos'function xPatternPos.restrict_line_index(a)assert(type(a)=="number","Expected 'line_idx' to be a number")return cLib.clamp_value(a,1,rns.selected_pattern.number_of_lines)end;function xPatternPos.jump_to_line(a)TRACE("xPatternPos.jump_to_line(line_idx)",a)a=xSongPos.restrict_line_index(rns.selected_pattern,a)rns.selected_line_index=a end;function xPatternPos.jump_to_previous_line()TRACE("xPatternPos.jump_to_previous_line()")local b=xPatternPos.get_previous_line()rns.selected_sequence_index=b.sequence;rns.selected_line_index=b.line end;function xPatternPos.jump_to_next_line()TRACE("xPatternPos.jump_to_next_line()")local b=xPatternPos.get_next_line()rns.selected_sequence_index=b.sequence;rns.selected_line_index=b.line end;function xPatternPos.jump_to_last_line()TRACE("xPatternPos.jump_to_last_line()")local c=rns.selected_pattern;rns.selected_line_index=c.number_of_lines end;function xPatternPos.jump_to_next_page()TRACE("xPatternPos.jump_to_next_page()")local c=rns.selected_pattern;local d=rns.selected_line_index+16;rns.selected_line_index=math.min(c.number_of_lines,d)end;function xPatternPos.jump_to_previous_page()TRACE("xPatternPos.jump_to_previous_page()")local d=rns.selected_line_index-16;rns.selected_line_index=math.max(1,d)end;function xPatternPos.jump_to_first_quarter_row()TRACE("xPatternPos.jump_to_first_quarter_row()")rns.selected_line_index=1 end;function xPatternPos.jump_to_second_quarter_row()TRACE("xPatternPos.jump_to_second_quarter_row()")rns.selected_line_index=1+rns.selected_pattern.number_of_lines/4*1 end;function xPatternPos.jump_to_third_quarter_row()TRACE("xPatternPos.jump_to_third_quarter_row()")rns.selected_line_index=1+rns.selected_pattern.number_of_lines/4*2 end;function xPatternPos.jump_to_fourth_quarter_row()TRACE("xPatternPos.jump_to_fourth_quarter_row()")rns.selected_line_index=1+rns.selected_pattern.number_of_lines/4*3 end;function xPatternPos.get_previous_line()TRACE("xPatternPos.get_previous_line()")local d=rns.selected_line_index-1;local e=rns.transport.wrapped_pattern_edit;local c=rns.selected_pattern;local f=rns.selected_sequence_index;if d<1 then if e then f=f-1;if f>0 then local g=rns.sequencer.pattern_sequence[f]local h=rns.patterns[g]d=h.number_of_lines+d else d=1;f=1 end else d=c.number_of_lines end end;local b=rns.transport.edit_pos;b.sequence=f;b.line=d;return b end;function xPatternPos.get_next_line()TRACE("xPatternPos.get_next_line()")local d=rns.selected_line_index+1;local e=rns.transport.wrapped_pattern_edit;local c=rns.selected_pattern;local f=rns.selected_sequence_index;if d>c.number_of_lines then if e then f=f+1;local i=#rns.sequencer.pattern_sequence;if f>i then f=i;local g=rns.sequencer.pattern_sequence[f]local h=rns.patterns[g]d=h.number_of_lines else d=1 end else d=1 end end;local b=rns.transport.edit_pos;b.sequence=f;b.line=d;return b end