class'xMidiCommand'xMidiCommand.TYPE={CONTROLLER_CHANGE=0,PITCH_BEND=1,PROGRAM_CHANGE=2,CH_AFTERTOUCH=3}function xMidiCommand:__init(...)local a=cLib.unpack_args(...)self.instrument_index=property(self.get_instrument_index,self.set_instrument_index)self._instrument_index=a.instrument_index or 255;self.message_type=property(self.get_message_type,self.set_message_type)self._message_type=a.message_type or xMidiCommand.TYPE.CONTROLLER_CHANGE;self.number_value=property(self.get_number_value)self.number_string=property(self.get_number_string)self.amount_value=property(self.get_amount_value)self.amount_string=property(self.get_amount_string)self._effect_column=xEffectColumn{number_value=a.number_value or 0,amount_value=a.amount_value or 0}end;function xMidiCommand:get_number_value()return self._effect_column.number_value end;function xMidiCommand:get_number_string()return self._effect_column.number_string end;function xMidiCommand:get_amount_value()return self._effect_column.amount_value end;function xMidiCommand:get_amount_string()return self._effect_column.amount_string end;function xMidiCommand:get_message_type()return self._message_type end;function xMidiCommand:set_message_type(b)assert(type(b)=="number","Expected message_type to be a number")local c=#table.keys(xMidiCommand.TYPE)if b<1 or b>c then local d="Expected message_type to be a number between 1 and %d"error(d:format(c))end;self._message_type=b end;function xMidiCommand:get_instrument_index()return self._instrument_index end;function xMidiCommand:set_instrument_index(b)assert(type(b)=="number","Expected instrument_index to be a number")if b>255 then local d="Expected message_type to be a number between 0 and 255"error(d)end;self._instrument_index=b end;function xMidiCommand:__tostring()return type(self)..", instrument_index="..tostring(self.instrument_index)..", message_type="..tostring(self.message_type)..", number_string="..tostring(self.number_string)..", amount_string="..tostring(self.amount_string)end