local error=error;local a,b,c,d,e=string.byte,string.find,string.format,string.gsub,string.match;local f=table.concat;local tostring=tostring;local pairs,type=pairs,type;local setmetatable=setmetatable;local g,h=1/0,-1/0;local i;if _VERSION=="Lua 5.1"then i='[^ -!#-[%]^-\255]'else i='[\0-\31"\\]'end;local j=nil;local function k()local l,m;local n,o,p;local function q(l)o[n]=tostring(l)n=n+1 end;local r=e(tostring(0.5),'[^0-9]')local s=e(tostring(12345.12345),'[^0-9'..r..']')if r=='.'then r=nil end;local t;if r or s then t=true;if r and b(r,'%W')then r='%'..r end;if s and b(s,'%W')then s='%'..s end end;local u=function(v)if h<v and v<g then local w=c("%.17g",v)if t then if s then w=d(w,s,'')end;if r then w=d(w,r,'.')end end;o[n]=w;n=n+1;return end;error('invalid number')end;local x;local y={['"']='\\"',['\\']='\\\\',['\b']='\\b',['\f']='\\f',['\n']='\\n',['\r']='\\r',['\t']='\\t',__index=function(z,A)return c('\\u00%02X',a(A))end}setmetatable(y,y)local function B(w)o[n]='"'if b(w,i)then w=d(w,i,y)end;o[n+1]=w;o[n+2]='"'n=n+3 end;local function C(D)if p[D]then error("loop detected")end;p[D]=true;local E=D[0]if type(E)=='number'then o[n]='['n=n+1;for F=1,E do x(D[F])o[n]=','n=n+1 end;if E>0 then n=n-1 end;o[n]=']'else E=D[1]if E~=nil then o[n]='['n=n+1;local F=2;repeat x(E)E=D[F]if E==nil then break end;F=F+1;o[n]=','n=n+1 until false;o[n]=']'else o[n]='{'n=n+1;local E=n;for G,l in pairs(D)do if type(G)~='string'then error("non-string key")end;B(G)o[n]=':'n=n+1;x(l)o[n]=','n=n+1 end;if n>E then n=n-1 end;o[n]='}'end end;n=n+1;p[D]=nil end;local H={boolean=q,number=u,string=B,table=C,__index=function()error("invalid type value")end}setmetatable(H,H)function x(l)if l==m then o[n]='null'n=n+1;return end;return H[type(l)](l)end;local function I(J,K)l,m=J,K;n,o,p=1,{},{}x(l)return f(o)end;return I end;return k